## Aws Commands and Snippets
| Action                                                                                                                                                                        | Command(s)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Starter Lambda function compatible with API Gateway v1.0                                                                                                                      | <pre><br/>exports.handler = async (event, context, callback) => {<br/>    const hasError = event['queryStringParameters']['myErrorParam'];<br/>    if (hasError === 'yes') {<br/>        callback(new Error('My error message'));<br/>    }<br/>    else {<br/>        const response = {<br/>            statusCode: 200,<br/>            headers: {"Access-Control-Allow-Origin": "*"},<br/>            body: JSON.stringify({success: true}),<br/>            isBase64Encoded: false<br/>        };<br/>        callback(null, response);<br/>}</pre>                                                                      |
| Batch script to update an existing Lambda function that uses a Lambda Layer. Assumes local layer name is ./helpers and layer on AWS Lambda is located at /opt/lambdas/helpers | <pre><br/>:: This batch file redeploys an existing lambda function<br/>:: Usage: deploy-existing.bat getAllProducts<br/>echo off<br/>echo WARNING: this will delete any index.js or index.zip you have in the current directory!<br/>pause<br/>set /p toDeploy=Enter lambda name (without the .js): <br/>powershell -Command "(gc %toDeploy%.js) -replace './helpers', '/opt/lambdas/helpers' \| Out-File -encoding ASCII index.js"<br/>powershell "Compress-Archive index.js index.zip"<br/>aws lambda update-function-code --function-name %toDeploy% --zip-file fileb://index.zip<br/>del index.js<br/>del index.zip</pre> |
